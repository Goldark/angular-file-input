(function(){"use strict";angular.module("angularFileInput",[]).directive("ngFileInput",function(t,e,n){return{restrict:"E",scope:{callback:"&",mode:"@",tmpl:"="},template:'<input ng-hide="tmpl" type="file" />',link:function(a,i){function r(t){var e=t.split("data:")[1],n=e.split(";"),a=n[0],i=n[1].split(","),r=i[0],l=i[1];return{mimetype:a,encoding:r,content:l}}function l(t){var e=t.target.files[0];if(e){var n=new FileReader;n.onload=function(t){var n=t.target.result,i={};"data-url"==a.mode?i=r(n):i.content=n,i.name=e.name,i.size=e.size,a.content=i,a.callback({file:i}),a.$apply()},a.mode||(a.mode="data-url"),n["readAs"+u[a.mode]]&&n["readAs"+u[a.mode]](e)}}var c=i.find("input")[0],u={"array-buffer":"ArrayBuffer","binary-string":"BinaryString","data-url":"DataURL",text:"Text"};c.addEventListener("change",l,!1),a.tmpl&&e.get(a.tmpl,{cache:n}).then(function(e){var n=e.data,r=angular.element(n);r[0].onclick=function(){c.click()},t(r)(a),i.append(r)})}}})}).call(this);